{% extends "modal_form.html" %}
{% load i18n %}
{% load inventree_extras %}
{% block pre_form_content %}

{{ block.super }}

<div class='alert alert-block alert-info'>
<b>{% trans "Automatically Allocate Stock" %}</b><br>
{% trans "Where the following conditions are met, stock will be automatically allocated to this build" %}:<br>
<hr>
{% trans "For each part in the BOM, the following tests are performed" %}:<br>
<ul>
    <li>{% trans "The part is not marked as trackable" %}</li>
    <li>{% trans "Only single stock items exists" %}</li>
    <li>{% trans "The stock item is not already allocated to this build" %}</li>
</ul>
</div>

{% if allocations %}

<table class='table table-striped table-condensed'>
<tr>
    <th></th>
    <th>{% trans "Part" %}</th>
    <th>{% trans "Quantity" %}</th>
    <th>{% trans "Location" %}</th>
</tr>
{% for item in allocations %}
<tr>
    <td>
        {% include "hover_image.html" with image=item.stock_item.part.image hover=True %}
    </td>
    <td>
        {{ item.stock_item.part.full_name }}<br>
        <i>{{ item.stock_item.part.description }}</i>
    </td>
    <td>{% decimal item.quantity %}</td>
    <td>{{ item.stock_item.location }}</td>
</tr>
{% endfor %}
</table>

{% else %}
<div class='alert alert-block alert-warning'>
    {% trans "No stock items found that can be automatically allocated to this build" %}
    <br>
    {% trans "Stock items will have to be manually allocated" %}
</div>
{% endif %}

{% endblock %}