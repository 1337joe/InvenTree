{% extends "collapse.html" %}

{% load static %}
{% load inventree_extras %}

{% block collapse_title %}
<div>
    <div class='media-left'>
        <img class='part-thumb' style='height: auto; width: 48px;'  
        {% if item.sub_part.image %}
        src="{{ item.sub_part.image.url }}" alt='{{ item.sub_part.name }}'>
        {% else %}
        src="{% static 'img/blank_image.png' %}" alt='No image'>
        {% endif %}
    </div>
    <div class='media-body'>
        {{ item.sub_part.name }}<br>
        <small><i>{{ item.sub_part.description }}</i></small>
    </div>
</div>
{% endblock %}

{% block collapse_heading %}
<div class='col-sm-1' align='right'>
        Required:
    </div>
    <div class='col-sm-1'>   
        <b>{% multiply build.quantity item.quantity %}</b>
    </div>
    <div class='col-sm-1' align='right'>
        Allocated:
    </div>
    <div class='col-sm-1' id='allocation-panel-{{ item.sub_part.id }}'>
        <b><span id='allocation-total-{{ item.sub_part.id }}'>0</span></b>
    </div>
    <div class='col-sm-2'>
        <div class='btn-group' style='float: right;'>
            <button class='btn btn-success btn-sm' id='new-item-{{ item.sub_part.id }}' url="{% url 'build-item-create' %}?part={{ item.sub_part.id }}&build={{ build.id }}">Allocate Parts</button>
        </div>
</div>
{% endblock %}

{% block collapse_content %}
<table class='table table-striped table-condensed' id='allocate-table-id-{{ item.sub_part.id }}'>
</table>
{% endblock %}