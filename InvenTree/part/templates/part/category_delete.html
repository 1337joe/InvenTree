{% extends 'base.html' %}

{% block content %}

<div class="panel panel-danger">
    <div class="panel-heading">Are you sure you want to delete category '{{ category.name }}'?</div>
    <div class='panel-body'>

    <p><b>Deleting this category is a permanent action and cannot be undone.</b></p>

    {% if category.children.all|length > 0 %}
    <p>This category contains {{ category.children.all|length }} child categories.<br>
    If this category is deleted, these child categories will be moved to
    {% if category.parent %}
    the '{{ category.parent.name }}' category.
    {% else %}
    the top level 'Parts' category.
    {% endif %}
    </p>

    <ul class='list-group'>
    {% for cat in category.children.all %}
        <li class='list-group-item'>{{ cat.name }} - {{ cat.description }}</li>
    {% endfor %}
    </ul>
    {% endif %}

    {% if category.parts.all|length > 0 %}
    <p>This category contains {{ category.parts.all|length }} parts.<br>
        {% if category.parent %}
        If this category is deleted, these parts will be moved to the parent category '{{ category.parent.pathstring }}'
        {% else %}
        If this category is deleted, these parts will be moved to the top-level category 'Parts'
        {% endif %}
    </p>
    <ul class='list-group'>
    {% for part in category.parts.all %}
        <li class='list-group-item'>{{ part.name }} - {{ part.description }}</li>
    {% endfor %}
    </ul>
    {% endif %}

    <form action="" method="post">{% csrf_token %}
      <input type="submit" name='confirm' value="Confirm" />
      <input type="submit" name="cancel" value="Cancel" />
    </form>
    </div>
</div>

{% endblock %}